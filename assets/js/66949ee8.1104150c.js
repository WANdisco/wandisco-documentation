(window.webpackJsonp=window.webpackJsonp||[]).push([[39],{110:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return c})),a.d(t,"toc",(function(){return l})),a.d(t,"default",(function(){return b}));var n=a(3),r=a(7),o=(a(0),a(173)),i={id:"s3-adlsg2_bi",title:"AWS S3 and Azure Data Lake Storage Gen2",sidebar_label:"AWS S3 & ADLS Gen2"},c={unversionedId:"quickstarts/installation/s3-adlsg2_bi",id:"quickstarts/installation/s3-adlsg2_bi",isDocsHomePage:!1,title:"AWS S3 and Azure Data Lake Storage Gen2",description:"Use this quickstart to configure LiveData Plane to migrate data from an AWS S3 bucket to an ADLS Gen2 container, or from an ADLS Gen2 container to an AWS S3 bucket.",source:"@site/docs/quickstarts/installation/s3-adlsg2_bi.md",slug:"/quickstarts/installation/s3-adlsg2_bi",permalink:"/wandisco-documentation/docs/quickstarts/installation/s3-adlsg2_bi",version:"current",sidebar_label:"AWS S3 & ADLS Gen2",sidebar:"quickstarts",previous:{title:"ADLS Gen1 to ADLS Gen2",permalink:"/wandisco-documentation/docs/quickstarts/installation/adlsg1-adlsg2"},next:{title:"Cloudera (CDH) Sandbox to ADLS Gen2",permalink:"/wandisco-documentation/docs/quickstarts/installation/cdh_sandbox-adlsg2"}},l=[{value:"Prerequisites",id:"prerequisites",children:[{value:"Info you will require",id:"info-you-will-require",children:[]}]},{value:"Installation",id:"installation",children:[{value:"Setup LiveData Plane",id:"setup-livedata-plane",children:[]}]},{value:"Configuration",id:"configuration",children:[{value:"Configure the S3 storage",id:"configure-the-s3-storage",children:[]},{value:"Configure the ADLS Gen2 storage",id:"configure-the-adls-gen2-storage",children:[]}]},{value:"Next steps",id:"next-steps",children:[]},{value:"Troubleshooting",id:"troubleshooting",children:[]},{value:"Reference architecture",id:"reference-architecture",children:[]}],s={toc:l};function b(e){var t=e.components,i=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},s,i,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Use this quickstart to configure LiveData Plane to migrate data from an AWS S3 bucket to an ADLS Gen2 container, or from an ADLS Gen2 container to an AWS S3 bucket.\nThe set up is the same for either scenario, just choose the direction when starting your migration."),Object(o.b)("p",null,"What this guide will cover:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"Installing LiveData Plane using the ",Object(o.b)("a",{parentName:"li",href:"https://docs.docker.com/compose/"},"docker-compose")," tool."),Object(o.b)("li",{parentName:"ul"},"Integrating LiveData Plane with AWS S3 and ADLS Gen2 storage.")),Object(o.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(o.b)("div",{className:"admonition admonition-info alert alert--info"},Object(o.b)("div",{parentName:"div",className:"admonition-heading"},Object(o.b)("h5",{parentName:"div"},Object(o.b)("span",{parentName:"h5",className:"admonition-icon"},Object(o.b)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},Object(o.b)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),Object(o.b)("div",{parentName:"div",className:"admonition-content"},Object(o.b)("p",{parentName:"div"},"For more information about to create a suitable VM with all services installed, see our ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation"},"Azure VM creation")," or ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/quickstarts/preparation/aws_vm_creation"},"AWS VM creation")," guides. See our ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/quickstarts/preparation/vm_prep"},"VM Preparation")," guide for how to install the services only.|"))),Object(o.b)("p",null,"To complete this install, you will need:"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"AWS S3 bucket."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Only ",Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/general/latest/gr/signature-version-2.html"},"regions that support Signature Version 2")," are currently supported."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"ADLS Gen2 storage account with ",Object(o.b)("a",{parentName:"p",href:"https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-namespace"},"hierarchical namespace")," enabled."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"You will also need a container created inside this account."))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Linux Virtual Machine (e.g. AWS EC2 instance, Azure VM, etc)."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Minimum size recommendation = ",Object(o.b)("strong",{parentName:"li"},"8 vcpus, 32 GiB memory")," (e.g. ",Object(o.b)("a",{parentName:"li",href:"https://aws.amazon.com/ec2/instance-types/"},"m5.2xlarge"),"), ",Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/virtual-machines/dv3-dsv3-series#dsv3-series"},"Standard D8s v3"),")."),Object(o.b)("li",{parentName:"ul"},"A minimum of 24GB available storage for the ",Object(o.b)("inlineCode",{parentName:"li"},"/var/lib/docker")," directory.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"If creating your VM through the Azure portal (and not via our ",Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation"},"guide"),"), you may have insufficient disk space by default. See the ",Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/virtual-machines/windows/expand-os-disk"},"Microsoft docs")," for further info."))))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"The following services must be installed on the VM:  "),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://git-scm.com/book/en/v2/Getting-Started-Installing-Git"},"Git")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.docker.com/install/"},"Docker")," (v19.03.5 or higher)"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.docker.com/compose/install/#install-compose"},"Docker Compose for Linux")," (v1.25.0 or higher)")))),Object(o.b)("h3",{id:"info-you-will-require"},"Info you will require"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"AWS S3 details:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/AmazonS3/latest/user-guide/create-bucket.html"},"Bucket name")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"fusion-bucket"),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/general/latest/gr/rande.html#regional-endpoints"},"Bucket region")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"eu-west-1"),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/IAM/latest/UserGuide/id_credentials_access-keys.html#Using_CreateAccessKey"},"Access key")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"AOIPUFY7ETYAHBCYT765"),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.aws.amazon.com/general/latest/gr/aws-sec-cred-types.html#access-keys-and-secret-access-keys"},"Secret key")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"TY76eI3no3cdaWghr5tBkzPOP090bcD9c0lqpoL5"),")"))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"ADLS Gen2 storage account details:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-account-create?tabs=azure-portal#create-a-storage-account"},"Account name")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"adlsg2storage"),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal#create-a-container"},"Container name")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"fusionreplication"),")"),Object(o.b)("li",{parentName:"ul"},"Access Management - choose one of the options below.",Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage#view-access-keys-and-connection-string"},"Access key")," (Example: ",Object(o.b)("inlineCode",{parentName:"li"},"eTFdESnXOuG2qoUrqlDyCL+e6456789opasweghtfFMKAHjJg5JkCG8t1h2U1BzXvBwtYfoj5nZaDF87UK09po=="),")"),Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",{parentName:"li",href:"https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/howto-assign-access-portal"},"Managed identity"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},"Assign your managed identity to the two roles shown below on your ADLS Gen2 storage account:",Object(o.b)("br",{parentName:"li"}),Object(o.b)("strong",{parentName:"li"},"Storage Account Contributor"),Object(o.b)("br",{parentName:"li"}),Object(o.b)("strong",{parentName:"li"},"Storage Blob Data Owner"))))))))),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"These instructions have been tested on Ubuntu LTS.")),Object(o.b)("h2",{id:"installation"},"Installation"),Object(o.b)("p",null,"Log in to your VM prior to starting these steps."),Object(o.b)("h3",{id:"setup-livedata-plane"},"Setup LiveData Plane"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Clone the LiveData Plane docker repository to your Azure VM instance:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"git clone https://github.com/WANdisco/fusion-docker-compose.git"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Change to the repository directory:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"cd fusion-docker-compose"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Run the setup script:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"./setup-env.sh"))),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Choose the ",Object(o.b)("inlineCode",{parentName:"p"},"S3 and ADLS Gen2")," option when prompted.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"You have now completed the setup, to create and start your containers run:"),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"docker-compose up -d")),Object(o.b)("p",{parentName:"li"},"Docker will now download all required images and create the containers."))),Object(o.b)("h2",{id:"configuration"},"Configuration"),Object(o.b)("h3",{id:"configure-the-s3-storage"},"Configure the S3 storage"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Log in to the UI via a web browser."),Object(o.b)("p",{parentName:"li"},Object(o.b)("inlineCode",{parentName:"p"},"http://<dockerhost_IP_address>:8081")),Object(o.b)("p",{parentName:"li"},"Enter your email address and choose a password you will remember.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Click on the ",Object(o.b)("strong",{parentName:"p"},"Settings")," cog for the ",Object(o.b)("strong",{parentName:"p"},"s3")," storage, and fill in the details for your AWS S3 bucket. See the ",Object(o.b)("a",{parentName:"p",href:"#info-you-will-require"},"Info you will require")," section for reference.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Apply Configuration")," and wait for this to complete."))),Object(o.b)("h3",{id:"configure-the-adls-gen2-storage"},"Configure the ADLS Gen2 storage"),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Click on the ",Object(o.b)("strong",{parentName:"p"},"Settings")," cog for the ",Object(o.b)("strong",{parentName:"p"},"ADLS GEN2")," storage, and fill in the details for your ADLS Gen2 container. See the ",Object(o.b)("a",{parentName:"p",href:"#info-you-will-require"},"Info you will require")," section for reference.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Check the ",Object(o.b)("strong",{parentName:"p"},"Use Secure Protocol")," box.")),Object(o.b)("li",{parentName:"ol"},Object(o.b)("p",{parentName:"li"},"Click ",Object(o.b)("strong",{parentName:"p"},"Apply Configuration")," and wait for this to complete."))),Object(o.b)("h2",{id:"next-steps"},"Next steps"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Follow our ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/quickstarts/testing/test_s3"},"S3 testing guide")," to perform a sample data migration using the S3 storage as the ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/glossary/s#source"},"source"),".")),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"Follow our ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/quickstarts/testing/test_adlsg2"},"ADLS Gen2 testing guide")," to perform a sample data migration using the ADLS Gen2 storage as the ",Object(o.b)("a",{parentName:"p",href:"/wandisco-documentation/docs/glossary/s#source"},"source"),"."))),Object(o.b)("h2",{id:"troubleshooting"},"Troubleshooting"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},"See our ",Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation/docs/quickstarts/troubleshooting/general_troubleshooting"},"Troubleshooting")," guide for help.")),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Contact ",Object(o.b)("a",{parentName:"em",href:"https://wandisco.com/contact"},"WANdisco")," for further information about LiveData Plane and what it can offer you.")),Object(o.b)("h2",{id:"reference-architecture"},"Reference architecture"),Object(o.b)("p",null,Object(o.b)("img",{alt:"Architecture: S3 and ADLS Gen2",src:a(238).default})),Object(o.b)("ol",null,Object(o.b)("li",{parentName:"ol"},"When initiating a migration, LiveMigrator will scan the S3 or ADLS Gen2 storage depending on which is selected as ",Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation/docs/glossary/s#source"},"source"),")."),Object(o.b)("li",{parentName:"ol"},"Any new files or differences are read by the IHC Server in the source zone, and replicated to the LiveData Plane Server in the ",Object(o.b)("a",{parentName:"li",href:"/wandisco-documentation/docs/glossary/t#target"},"target")," zone."),Object(o.b)("li",{parentName:"ol"},"The LiveData Plane Server in the target zone will transform the data to equivalent target storage changes. LiveMigrator will overwrite or skip existing files on the target storage depending on the settings used.")))}b.isMDXComponent=!0},173:function(e,t,a){"use strict";a.d(t,"a",(function(){return p})),a.d(t,"b",(function(){return d}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var s=r.a.createContext({}),b=function(e){var t=r.a.useContext(s),a=t;return e&&(a="function"==typeof e?e(t):c(c({},t),e)),a},p=function(e){var t=b(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},m=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),p=b(a),m=n,d=p["".concat(i,".").concat(m)]||p[m]||u[m]||o;return a?r.a.createElement(d,c(c({ref:t},s),{},{components:a})):r.a.createElement(d,c({ref:t},s))}));function d(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=m;var c={};for(var l in t)hasOwnProperty.call(t,l)&&(c[l]=t[l]);c.originalType=e,c.mdxType="string"==typeof e?e:n,i[1]=c;for(var s=2;s<o;s++)i[s]=a[s];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}m.displayName="MDXCreateElement"},238:function(e,t,a){"use strict";a.r(t),t.default=a.p+"assets/images/arch_s3_adlsg2_bi-a5a09aebde26d82553df7b96d415ce1f.jpg"}}]);