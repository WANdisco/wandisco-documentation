(window.webpackJsonp=window.webpackJsonp||[]).push([[41],{179:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return i})),a.d(t,"metadata",(function(){return p})),a.d(t,"rightToc",(function(){return c})),a.d(t,"default",(function(){return s}));var n=a(2),r=a(9),o=(a(0),a(250)),i={id:"test_hdp_sandbox",title:"Test HDP Sandbox",sidebar_label:"Test HDP Sandbox"},p={id:"quickstarts/testing/test_hdp_sandbox",isDocsHomePage:!1,title:"Test HDP Sandbox",description:"Most of our installation quickstarts give you the basic steps to test small-scale replication. Use the examples in this section if you would like to test HCFS replication with larger and more randomized data sets.",source:"@site/../docs/quickstarts/testing/test_hdp_sandbox.md",permalink:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/testing/test_hdp_sandbox",sidebar_label:"Test HDP Sandbox",sidebar:"quickstarts",previous:{title:"Test CDH Sandbox",permalink:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/testing/test_cdh_sandbox"},next:{title:"General troubleshooting",permalink:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/troubleshooting/general_troubleshooting"}},c=[{value:"Prerequisites",id:"prerequisites",children:[]},{value:"HCFS replication",id:"hcfs-replication",children:[{value:"TeraGen",id:"teragen",children:[]},{value:"TeraSort",id:"terasort",children:[]},{value:"TeraValidate (optional)",id:"teravalidate-optional",children:[]}]},{value:"References",id:"references",children:[]}],l={rightToc:c};function s(e){var t=e.components,a=Object(r.a)(e,["components"]);return Object(o.b)("wrapper",Object(n.a)({},l,a,{components:t,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Most of our installation quickstarts give you the basic steps to test small-scale replication. Use the examples in this section if you would like to test HCFS replication with larger and more randomized data sets."),Object(o.b)("p",null,"Following these examples to the end will result in ~20GB of data being replicated."),Object(o.b)("h2",{id:"prerequisites"},"Prerequisites"),Object(o.b)("p",null,"Ensure that you have enough disk space and your server is appropriately sized to handle larger amounts of data."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"If using our ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation"}),"Azure VM Creation")," guide, see the ",Object(o.b)("inlineCode",{parentName:"p"},"--os-disk-size-gb")," and ",Object(o.b)("inlineCode",{parentName:"p"},"--size")," variables in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation#required-parameters"}),"required parameters")," section. At a minimum, these values should be:  "),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"--os-disk-size-gb 64"),"  "),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"--size Standard_D8s_v3")))),Object(o.b)("li",{parentName:"ul"},Object(o.b)("p",{parentName:"li"},"If using our ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/preparation/aws_vm_creation"}),"AWS VM Creation")," guide, see the ",Object(o.b)("inlineCode",{parentName:"p"},"--block-device-mappings")," and ",Object(o.b)("inlineCode",{parentName:"p"},"--instance-type")," variables in the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://wandisco.github.io/wandisco-documentation/docs/quickstarts/preparation/aws_vm_creation#required-parameters"}),"required parameters")," section. At a minimum, these values should be:  "),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},'--block-device-mappings "[{\\"DeviceName\\":\\"/dev/sda1\\",\\"Ebs\\":{\\"VolumeSize\\":64,\\"DeleteOnTermination\\":true}}]"'),"  "),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"--instance-type r5.xlarge"))))),Object(o.b)("h2",{id:"hcfs-replication"},"HCFS replication"),Object(o.b)("p",null,"The HDP Sandbox will be the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://wandisco.github.io/wandisco-documentation/docs/glossary/s#source"}),"source")," in all instances. Run all commands on the Docker host."),Object(o.b)("h3",{id:"teragen"},"TeraGen"),Object(o.b)("p",null,"Use the ",Object(o.b)("inlineCode",{parentName:"p"},"teragen")," option to generate random data:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar teragen <number-of-100-byte-rows> <output-path>")),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Example")),Object(o.b)("p",null,"To generate 10GB of data inside a replicated path, run:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar teragen 100000000 /path/to/replication_rule/teragen_output")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"teragen_output")," directory should not be created prior to running this command otherwise it will fail."),Object(o.b)("p",null,"Once complete, check the storage on your target zone for the generated files in the ",Object(o.b)("inlineCode",{parentName:"p"},"teragen_output")," directory. You will see a ",Object(o.b)("inlineCode",{parentName:"p"},"_SUCCESS")," file alongside the generated files."),Object(o.b)("h3",{id:"terasort"},"TeraSort"),Object(o.b)("p",null,"Use the ",Object(o.b)("inlineCode",{parentName:"p"},"terasort")," option to sort (i.e. organize) the generated data into a replicated path:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar terasort <input-path> <output-path>")),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Example")),Object(o.b)("p",null,"To sort the data from the staging directory into a replicated path, run:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar terasort /path/to/replication_rule/teragen_output /path/to/replication_rule/terasort_output")),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"terasort_output")," directory should not be created prior to running this command otherwise it will fail."),Object(o.b)("p",null,"Once complete, check the storage on your target zone for the generated files in the ",Object(o.b)("inlineCode",{parentName:"p"},"terasort_output")," directory. You will see a ",Object(o.b)("inlineCode",{parentName:"p"},"_SUCCESS")," file alongside the generated files."),Object(o.b)("h3",{id:"teravalidate-optional"},"TeraValidate (optional)"),Object(o.b)("p",null,"Use the ",Object(o.b)("inlineCode",{parentName:"p"},"teravalidate")," option to test that the data in the replicated path is now globally sorted:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar teravalidate <input-path> <output-path>")),Object(o.b)("p",null,Object(o.b)("em",{parentName:"p"},"Example")),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"docker-compose exec -u hdfs sandbox-hdp hadoop jar /usr/hdp/2.6.5.0-292/hadoop-mapreduce/hadoop-mapreduce-examples.jar teravalidate /path/to/replication_rule/terasort_output /path/to/replication_rule/teravalidate-output")),Object(o.b)("p",null,"If everything is correctly sorted, the ",Object(o.b)("inlineCode",{parentName:"p"},"teravalidate-output")," directory should contain a ",Object(o.b)("inlineCode",{parentName:"p"},"_SUCCESS")," file and another file containing a checksum value. To fully validate the operation, you can compare this value on both the source and target storages."),Object(o.b)("h2",{id:"references"},"References"),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://hadoop.apache.org/docs/r2.7.3/api/org/apache/hadoop/examples/terasort/package-summary.html"}),"Terasort package"))))}s.isMDXComponent=!0},250:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return h}));var n=a(0),r=a.n(n);function o(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function p(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){o(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function c(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},o=Object.keys(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)a=o[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=r.a.createContext({}),s=function(e){var t=r.a.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):p(p({},t),e)),a},d=function(e){var t=s(e.components);return r.a.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},b=r.a.forwardRef((function(e,t){var a=e.components,n=e.mdxType,o=e.originalType,i=e.parentName,l=c(e,["components","mdxType","originalType","parentName"]),d=s(a),b=n,h=d["".concat(i,".").concat(b)]||d[b]||u[b]||o;return a?r.a.createElement(h,p(p({ref:t},l),{},{components:a})):r.a.createElement(h,p({ref:t},l))}));function h(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var o=a.length,i=new Array(o);i[0]=b;var p={};for(var c in t)hasOwnProperty.call(t,c)&&(p[c]=t[c]);p.originalType=e,p.mdxType="string"==typeof e?e:n,i[1]=p;for(var l=2;l<o;l++)i[l]=a[l];return r.a.createElement.apply(null,i)}return r.a.createElement.apply(null,a)}b.displayName="MDXCreateElement"}}]);