<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="generator" content="Docusaurus v2.0.0-alpha.58">
<link rel="search" type="application/opensearchdescription+xml" title="WANdisco docs" href="/wandisco-documentation/opensearch.xml"><title data-react-helmet="true">Hortonworks (HDP) Sandbox to Azure Databricks with LiveAnalytics | WANdisco docs</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:title" content="Hortonworks (HDP) Sandbox to Azure Databricks with LiveAnalytics | WANdisco docs"><meta data-react-helmet="true" name="description" content="Use this quickstart to configure LiveData Plane to replicate from a non-kerberized Hortonworks (HDP) Sandbox to an Azure Databricks cluster."><meta data-react-helmet="true" property="og:description" content="Use this quickstart to configure LiveData Plane to replicate from a non-kerberized Hortonworks (HDP) Sandbox to an Azure Databricks cluster."><meta data-react-helmet="true" property="og:url" content="https://wandisco.github.io/wandisco-documentation//wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_lhv_client-adlsg2_lan"><link data-react-helmet="true" rel="shortcut icon" href="/wandisco-documentation/img/favicon.png"><link data-react-helmet="true" rel="canonical" href="https://wandisco.github.io/wandisco-documentation//wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_lhv_client-adlsg2_lan"><link rel="stylesheet" href="/wandisco-documentation/styles.a9227a34.css">
<link rel="preload" href="/wandisco-documentation/styles.d276d873.js" as="script">
<link rel="preload" href="/wandisco-documentation/runtime~main.20a54933.js" as="script">
<link rel="preload" href="/wandisco-documentation/main.6fa37440.js" as="script">
<link rel="preload" href="/wandisco-documentation/1.dfa7694e.js" as="script">
<link rel="preload" href="/wandisco-documentation/2.2545795b.js" as="script">
<link rel="preload" href="/wandisco-documentation/3.d9f6d8e0.js" as="script">
<link rel="preload" href="/wandisco-documentation/1be78505.78f1f22a.js" as="script">
<link rel="preload" href="/wandisco-documentation/122.4a0f5c7d.js" as="script">
<link rel="preload" href="/wandisco-documentation/ae4b7282.4a39c5a5.js" as="script">
<link rel="preload" href="/wandisco-documentation/17896441.444174a7.js" as="script">
<link rel="preload" href="/wandisco-documentation/b2ac1508.5a210ee1.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=window.matchMedia("(prefers-color-scheme: dark)"),n=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();null!==n?t(n):e.matches&&t("dark")}()</script><div id="__docusaurus">
<nav class="navbar navbar--light navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/wandisco-documentation/"><img class="navbar__logo" src="/wandisco-documentation/img/favicon.png" alt="WANdisco Fusion Logo"><strong class="navbar__title">WANdisco Fusion</strong></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/wandisco-documentation/docs/product-concepts/benefits">Product Concepts</a><a class="navbar__item navbar__link" href="/wandisco-documentation/docs/quickstarts/preparation/get-started">Guides</a><a class="navbar__item navbar__link" href="/wandisco-documentation/docs/glossary/a">Glossary</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_1gtM"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_keGJ moon_1gwN"></span></div><div class="react-toggle-track-x"><span class="toggle_keGJ sun_3CPA"></span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><div class="navbar__search"><div class="searchWrapper_-F3-"><span aria-label="expand searchbar" role="button" class="searchIconButton_1Dnz" tabindex="0"></span><input type="search" id="search_input_react" placeholder="Search" aria-label="Search" class="navbar__search-input searchInput_2eto"></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/wandisco-documentation/"><img class="navbar__logo" src="/wandisco-documentation/img/favicon.png" alt="WANdisco Fusion Logo"><strong class="navbar__title">WANdisco Fusion</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/wandisco-documentation/docs/product-concepts/benefits">Product Concepts</a></li><li class="menu__list-item"><a class="menu__link" href="/wandisco-documentation/docs/quickstarts/preparation/get-started">Guides</a></li><li class="menu__list-item"><a class="menu__link" href="/wandisco-documentation/docs/glossary/a">Glossary</a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="docPage_1kjD"><div class="docSidebarContainer_1cYp" role="complementary"><div class="sidebar_1kLs"><div class="menu menu--responsive menu_w2sC"><button aria-label="Open Menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg aria-label="Menu" class="sidebarMenuIcon_2vk4" xmlns="http://www.w3.org/2000/svg" height="24" width="24" viewBox="0 0 32 32" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Preparation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/get-started">Get Started with LiveData Plane</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Dockerized LiveData Plane</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/dockerized-fusion-requirements">Requirements</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/aws_vm_creation">AWS VM Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation">Azure VM Creation</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/vm_prep">VM Preparation</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage Existing Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/preparation/prerequisites-ui">Prerequisites</a></li></ul></li></ul></li><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!">Installation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link menu__link--sublist menu__link--active" href="#!" tabindex="0">Dockerized LiveData Plane</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/installation-quickstarts">Choose a Quickstart</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/adlsg1-adlsg2">ADLS Gen1 to ADLS Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/s3-adlsg2_bi">AWS S3 &amp; ADLS Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/cdh_sandbox-adlsg2">CDH Sandbox to ADLS Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/cdh_sandbox_lhv_client-adlsg2_lan">CDH Sandbox to Azure Databricks with LiveAnalytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/cdh_sandbox-s3">CDH Sandbox to AWS S3</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_adlsg2">HDP Sandbox to ADLS Gen2</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_lhv_client-adlsg2_lan">HDP Sandbox to Azure Databricks with LiveAnalytics</a></li><li class="menu__list-item"><a class="menu__link" tabindex="0" href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox-s3">HDP Sandbox to AWS S3</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="0">Manage Existing Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/installation/install-ui">Install Management UI</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/installation/connect-to-storages">Connect to Storages</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Testing</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Dockerized LiveData Plane</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test_adlsg1">Test ADLS Gen1</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test_adlsg2">Test ADLS Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test_s3">Test AWS S3</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Test CDH Sandbox</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-cdh-sandbox-livemigrator">LiveMigrator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-cdh-sandbox-livedata">LiveData</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-cdh-sandbox-liveanalytics">LiveAnalytics</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Test HDP Sandbox</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-hdp-sandbox-livemigrator">LiveMigrator</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-hdp-sandbox-livedata">LiveData</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-hdp-sandbox-liveanalytics">LiveAnalytics</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage Existing Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/testing/test-ui">Test your environment</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Operation</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/create-rule">Create a Rule</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/consistency-check">Consistency Check</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/migration">Start a Migration</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/license_upgrade">License Upgrade</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/advanced-settings">Advanced Settings</a></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Dockerized LiveData Plane only</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/cdh_sandbox_fusion_stop_start">Stop/Start CDH Sandbox &amp; LiveData Plane</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/operation/hdp_sandbox_fusion_stop_start">Stop/Start HDP Sandbox &amp; LiveData Plane</a></li></ul></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!">Troubleshooting</a><ul class="menu__list"><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Dockerized LiveData Plane</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/general_troubleshooting">General</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/cdh_sandbox_troubleshooting">CDH Sandbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/hdp_sandbox_troubleshooting">HDP Sandbox</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/adlsg2_troubleshooting">ADLS Gen2</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/databricks_troubleshooting">Databricks Delta Lake</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/logs">Logs</a></li><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/useful_info">Useful Information</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a class="menu__link menu__link--sublist" href="#!" tabindex="-1">Manage Existing Deployments</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" tabindex="-1" href="/wandisco-documentation/docs/quickstarts/troubleshooting/ui-troubleshooting">UI Troubleshooting</a></li></ul></li></ul></li></ul></div></div></div><main class="docMainContainer_FFX1"><div class="container padding-vert--lg docItemWrapper_1cc7"><div class="row"><div class="col docItemCol_2GOA"><div class="docItemContainer_2cwg"><article><header><h1 class="docTitle_1vWb">Hortonworks (HDP) Sandbox to Azure Databricks with LiveAnalytics</h1></header><div class="markdown"><p>Use this quickstart to configure LiveData Plane to replicate from a non-kerberized Hortonworks (HDP) Sandbox to an Azure Databricks cluster.</p><p>This uses the <a href="https://wandisco.com/products/live-analytics" target="_blank" rel="noopener noreferrer">WANdisco LiveAnalytics</a> solution, comprising both LiveData for Databricks and the Hive Plugin.</p><p>What this guide will cover:</p><ul><li>Installing LiveData Plane and a HDP Sandbox using the <a href="https://docs.docker.com/compose/" target="_blank" rel="noopener noreferrer">docker-compose</a> tool.</li><li>Integrating LiveData Plane with Azure Databricks.</li></ul><p>If you would like to try something different with the HDP Sandbox, see:</p><ul><li><a href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_adlsg2">HDP Sandbox to ADLS Gen2 (HCFS data only)</a></li><li><a href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox-s3">HDP Sandbox to S3</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="prerequisites"></a>Prerequisites<a aria-hidden="true" tabindex="-1" class="hash-link" href="#prerequisites" title="Direct link to heading">#</a></h2><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>For more information about to create a suitable VM with all services installed, see our <a href="/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation">Azure VM creation</a> guide. See our <a href="/wandisco-documentation/docs/quickstarts/preparation/vm_prep">VM Preparation</a> guide for how to install the services only.|</p></div></div><p>To complete this install, you will need:</p><ul><li><p>ADLS Gen2 storage account with <a href="https://docs.microsoft.com/en-us/azure/storage/blobs/data-lake-storage-namespace" target="_blank" rel="noopener noreferrer">hierarchical namespace</a> enabled.</p><ul><li>You will also need a container created inside this account.</li></ul></li><li><p>Azure Databricks cluster.</p></li><li><p>Azure Virtual Machine (VM).</p><ul><li>Minimum size recommendation = <strong>8 vcpus, 32 GiB memory</strong> (e.g. <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/dv3-dsv3-series#dsv3-series" target="_blank" rel="noopener noreferrer">Standard D8s v3</a>).</li><li>A minimum of 24GB available storage for the <code>/var/lib/docker</code> directory.<ul><li>If creating your VM through the Azure portal (and not via our <a href="/wandisco-documentation/docs/quickstarts/preparation/azure_vm_creation">guide</a>), you may have insufficient disk space by default. See the <a href="https://docs.microsoft.com/en-us/azure/virtual-machines/windows/expand-os-disk" target="_blank" rel="noopener noreferrer">Microsoft docs</a> for further info.</li></ul></li></ul></li><li><p>The following services must be installed on the VM:</p><ul><li><a href="https://git-scm.com/book/en/v2/Getting-Started-Installing-Git" target="_blank" rel="noopener noreferrer">Git</a></li><li><a href="https://docs.docker.com/install/" target="_blank" rel="noopener noreferrer">Docker</a> (v19.03.5 or higher)</li><li><a href="https://docs.docker.com/compose/install/#install-compose" target="_blank" rel="noopener noreferrer">Docker Compose for Linux</a> (v1.25.0 or higher)</li></ul></li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="info-you-will-require"></a>Info you will require<a aria-hidden="true" tabindex="-1" class="hash-link" href="#info-you-will-require" title="Direct link to heading">#</a></h3><ul><li><p>ADLS Gen2 storage account details:</p><ul><li><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-create?tabs=azure-portal#create-a-storage-account" target="_blank" rel="noopener noreferrer">Account name</a> (Example: <code>adlsg2storage</code>)</li><li><a href="https://docs.microsoft.com/en-us/azure/storage/blobs/storage-quickstart-blobs-portal#create-a-container" target="_blank" rel="noopener noreferrer">Container name</a> (Example: <code>fusionreplication</code>)</li><li>Access Management - choose one of the options below.<ul><li><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-account-keys-manage#view-access-keys-and-connection-string" target="_blank" rel="noopener noreferrer">Access key</a> (Example: <code>eTFdESnXOuG2qoUrqlDyCL+e6456789opasweghtfFMKAHjJg5JkCG8t1h2U1BzXvBwtYfoj5nZaDF87UK09po==</code>)</li><li><a href="https://docs.microsoft.com/en-us/azure/active-directory/managed-identities-azure-resources/howto-assign-access-portal" target="_blank" rel="noopener noreferrer">Managed identity</a><ul><li>Assign your managed identity to the two roles shown below on your ADLS Gen2 storage account:<br><strong>Storage Account Contributor</strong><br><strong>Storage Blob Data Owner</strong></li></ul></li></ul></li></ul></li><li><p>Credentials for your Azure Databricks cluster:</p><ul><li><a href="https://docs.databricks.com/workspace/workspace-details.html#workspace-instance-and-id">Databricks Service Address (Instance name)</a> (Example: <code>westeurope.azuredatabricks.net</code>)<ul><li>As of April 16th 2020, the URL scheme for a new Databricks Workspace will have a format of <code>adb-&lt;workspace-id&gt;.&lt;random&gt;.azuredatabricks.net</code>. The URL format for existing Workspaces will stay the same.</li></ul></li><li><a href="https://docs.databricks.com/dev-tools/api/latest/authentication.html#generate-a-token">Bearer Token</a> (Example: <code>dapibe21cfg45efae945t6f0b57dfd1dffb4</code>)</li><li><a href="https://docs.databricks.com/workspace/workspace-details.html#cluster-url">Databricks Cluster ID</a> (Example: <code>0234-125567-cowls978</code>)</li><li><a href="https://docs.databricks.com/bi/jdbc-odbc-bi.html#construct-the-jdbc-url">JDBC/ODBC HTTP path</a> (Example: <code>sql/protocolv1/o/8445611090456789/0234-125567-cowls978</code>)</li></ul></li></ul><p><em>These instructions have been tested on Ubuntu LTS.</em></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="installation"></a>Installation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#installation" title="Direct link to heading">#</a></h2><p>Log in to your VM prior to starting these steps.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="setup-livedata-plane"></a>Setup LiveData Plane<a aria-hidden="true" tabindex="-1" class="hash-link" href="#setup-livedata-plane" title="Direct link to heading">#</a></h3><ol><li><p>Clone the LiveData Plane docker repository:</p><p><code>git clone https://github.com/WANdisco/hdp-adls2.git</code></p></li><li><p>Change to the repository directory:</p><p><code>cd hdp-adls2</code></p></li><li><p>Create and start your containers:</p><p><code>docker-compose up -d</code></p><p>Docker will now download all required images and create the containers.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configuration"></a>Configuration<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configuration" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="check-hdp-services-are-started"></a>Check HDP services are started<a aria-hidden="true" tabindex="-1" class="hash-link" href="#check-hdp-services-are-started" title="Direct link to heading">#</a></h3><p>The HDP sandbox services can take up to 5-10 minutes to start. To check that the HDFS service is started:</p><ol><li><p>Log in to Ambari via a web browser.</p><p><code>http://&lt;dockerhost_IP_address&gt;:8080</code></p><p>Username: <code>admin</code>
Password: <code>admin</code></p></li><li><p>Select the <strong>HDFS</strong> service.</p></li><li><p>Wait until all the HDFS components are showing as <strong>Started</strong>.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configure-the-adls-gen2-storage"></a>Configure the ADLS Gen2 storage<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-the-adls-gen2-storage" title="Direct link to heading">#</a></h3><ol><li><p>Log in to the UI via a web browser.</p><p><code>http://&lt;dockerhost_IP_address&gt;:8081</code></p><p>Enter your email address and choose a password you will remember.</p></li><li><p>Click on the <strong>Settings</strong> cog for the <strong>ADLS GEN2</strong> storage, and fill in the details for your ADLS Gen2 storage account. See the <a href="#info-you-will-require">Info you will require</a> section for reference.</p></li><li><p>Check the <strong>Use Secure Protocol</strong> box.</p></li><li><p>Click <strong>Apply Configuration</strong> and wait for this to complete.</p></li></ol><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="configure-livedata-for-databricks"></a>Configure LiveData for Databricks<a aria-hidden="true" tabindex="-1" class="hash-link" href="#configure-livedata-for-databricks" title="Direct link to heading">#</a></h3><ol><li><p>Click on the <strong>Settings</strong> cog in the <strong>ADLS GEN2</strong> storage, and fill in the details for your Databricks cluster. See the <a href="#info-you-will-require">Info you will require</a> section for reference.</p></li><li><p>Click <strong>Activate</strong> and wait for the status to show as <strong>Active</strong> before continuing.</p></li></ol><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="next-steps"></a>Next steps<a aria-hidden="true" tabindex="-1" class="hash-link" href="#next-steps" title="Direct link to heading">#</a></h2><p>Follow our <a href="/wandisco-documentation/docs/quickstarts/testing/test-hdp-sandbox-liveanalytics">HDP Sandbox LiveAnalytics testing guide</a> to replicate to your Databricks cluster.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="troubleshooting"></a>Troubleshooting<a aria-hidden="true" tabindex="-1" class="hash-link" href="#troubleshooting" title="Direct link to heading">#</a></h2><ul><li><p>If you are unable to access the Ambari or LiveData Plane UI, you may need admin assistance with your network configuration. See our <a href="/wandisco-documentation/docs/quickstarts/troubleshooting/general_troubleshooting#unable-to-access-ambari-cloudera-or-fusion-ui-on-vm">Azure specific troubleshooting</a> section for more detail.</p></li><li><p>See our <a href="/wandisco-documentation/docs/quickstarts/troubleshooting/hdp_sandbox_troubleshooting">Troubleshooting</a> guide for help with this install.</p></li><li><p>See the <a href="/wandisco-documentation/docs/quickstarts/operation/hdp_sandbox_fusion_stop_start">shutdown and start up</a> guide for when you wish to safely shutdown or start back up the environment.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_ZqCz" id="reference-architecture"></a>Reference architecture<a aria-hidden="true" tabindex="-1" class="hash-link" href="#reference-architecture" title="Direct link to heading">#</a></h2><p><img src="/wandisco-documentation/img/arch_hdp_sandbox_az_databricks_lan.jpg" alt="Architecture: HDP Sandbox to Azure Databricks with LiveAnalytics"></p><ol><li>Live Hive Proxy will intercept and co-ordinate the Hive request with the LiveData Plane Server on the HDP zone.</li><li>If the request is on a database/table that matches a Hive rule, the LiveData Plane Server in the HDP zone will coordinate with the LiveData Plane Server in the ADLS Gen2 zone (read requests are passed through to Hive). Metadata is replicated from the HDP zone to the ADLS Gen2 zone.</li><li>Any related HDFS data writes/changes are read by the IHC Server in the HDP zone, and replicated to the LiveData Plane Server in the ADLS Gen2 zone.</li><li>The LiveData Plane Server in the ADLS zone will transform the Hive metadata to equivalent changes on the Azure Databricks Delta Lake tables.</li><li>The LiveData Plane Server in the ADLS zone will transform the HDFS data to equivalent ADLS Gen2 storage changes.</li><li>The ADLS Gen2 storage changes are then pushed to the Databricks cluster automatically through LiveData Plane&#x27;s ETL library (installed on the Databricks cluster).</li></ol></div></article><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Blog list page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox_adlsg2"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">« Hortonworks (HDP) Sandbox to ADLS Gen2</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/wandisco-documentation/docs/quickstarts/installation/hdp_sandbox-s3"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Hortonworks (HDP) Sandbox to AWS S3 »</div></a></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_TbNY"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#prerequisites" class="table-of-contents__link">Prerequisites</a><ul><li><a href="#info-you-will-require" class="table-of-contents__link">Info you will require</a></li></ul></li><li><a href="#installation" class="table-of-contents__link">Installation</a><ul><li><a href="#setup-livedata-plane" class="table-of-contents__link">Setup LiveData Plane</a></li></ul></li><li><a href="#configuration" class="table-of-contents__link">Configuration</a><ul><li><a href="#check-hdp-services-are-started" class="table-of-contents__link">Check HDP services are started</a></li><li><a href="#configure-the-adls-gen2-storage" class="table-of-contents__link">Configure the ADLS Gen2 storage</a></li><li><a href="#configure-livedata-for-databricks" class="table-of-contents__link">Configure LiveData for Databricks</a></li></ul></li><li><a href="#next-steps" class="table-of-contents__link">Next steps</a></li><li><a href="#troubleshooting" class="table-of-contents__link">Troubleshooting</a></li><li><a href="#reference-architecture" class="table-of-contents__link">Reference architecture</a></li></ul></div></div></div></div></main></div></div><footer class="footer"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/wandisco-documentation/docs/quickstarts/preparation/get-started">Getting Started</a></li><li class="footer__item"><a href="https://docs.wandisco.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Product User Guides</a></li><li class="footer__item"><a href="https://community.wandisco.com/s/knowledge-base" target="_blank" rel="noopener noreferrer" class="footer__link-item">Knowledge Base</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://community.wandisco.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">WANdisco Community</a></li><li class="footer__item"><a href="//wandisco.com/partners" target="_blank" rel="noopener noreferrer" class="footer__link-item">Partners</a></li><li class="footer__item"><a href="//twitter.com/WANdisco" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/wandisco-documentation/docs/help/need_help">Help</a></li><li class="footer__item"><a href="https://wandisco.com/blog" target="_blank" rel="noopener noreferrer" class="footer__link-item">Blog</a></li><li class="footer__item"><a href="https://blogs.wandisco.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Developer Blog</a></li></ul></div></div><div class="text--center"><div>Copyright © 2020 WANdisco, Inc.</div></div></div></footer></div>
<script src="/wandisco-documentation/styles.d276d873.js"></script>
<script src="/wandisco-documentation/runtime~main.20a54933.js"></script>
<script src="/wandisco-documentation/main.6fa37440.js"></script>
<script src="/wandisco-documentation/1.dfa7694e.js"></script>
<script src="/wandisco-documentation/2.2545795b.js"></script>
<script src="/wandisco-documentation/3.d9f6d8e0.js"></script>
<script src="/wandisco-documentation/1be78505.78f1f22a.js"></script>
<script src="/wandisco-documentation/122.4a0f5c7d.js"></script>
<script src="/wandisco-documentation/ae4b7282.4a39c5a5.js"></script>
<script src="/wandisco-documentation/17896441.444174a7.js"></script>
<script src="/wandisco-documentation/b2ac1508.5a210ee1.js"></script>
</body>
</html>